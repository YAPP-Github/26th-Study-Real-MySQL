## 4.3 MyISAM 스토리지 엔진 아키텍처 요약

### 1. 키 캐시 (Key Cache)

- **MyISAM은 인덱스 전용 캐시인 키 캐시(key_buffer_size)**를 통해 인덱스 디스크 I/O를 줄임
- 히트율은 `Key_reads`와 `Key_read_requests` 상태 변수로 측정 가능  
  → `Hit rate = 100 - (Key_reads / Key_read_requests * 100)`
- 키 캐시는 기본 캐시 외에 **이름이 지정된 캐시를 추가로 구성 가능**  
  → 각 테이블의 인덱스를 특정 키 캐시에 명시적으로 매핑해야 함
- 64비트 환경에서는 4GB 이상 캐시도 설정 가능하며, 운영체제 한계에 유의해야 함

### 2. 운영체제 캐시 의존

- MyISAM은 **데이터 캐시 기능이 없어**, 데이터 파일 I/O는 **운영체제의 파일 시스템 캐시에 의존**
- 사용 가능한 **메모리를 충분히 남겨** OS가 캐시에 활용할 수 있도록 조정 필요
- 일반적으로 **키 캐시는 전체 메모리의 40% 이하로 제한**하고 나머지는 OS 캐시로 확보하는 것이 권장됨

### 3. 데이터 파일 및 ROWID 구조

- MyISAM은 **프라이머리 키 클러스터링이 없고**, 데이터는 **삽입 순서대로 저장**됨
- 인덱스는 데이터 위치(ROWID)를 가리키며, ROWID는 두 가지 방식으로 저장됨:
    - **고정 길이 ROWID**: `MAX_ROWS` 지정 시, 4바이트 정수 사용 (레코드 수 제한)
    - **가변 길이 ROWID**: 기본 설정이며, `myisam_data_pointer_size`에 따라 2~7바이트 사용  
      → 최대 테이블 크기: 기본 256TB, 최대 설정 시 64PB까지 확장 가능
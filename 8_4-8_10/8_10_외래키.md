## 8.10 외래 키

MySQL에서 외래 키는 **InnoDB 엔진에서만** 생성할 수 있으며, 외래 키 제약을 설정하면 **연결된 컬럼에 자동으로 인덱스가 생성**된다.

InnoDB의 외래 키 처리에는 다음과 같은 두 가지 주요 특징이 있다.

1. **쓰기 작업 중에만 잠금 경합이 발생한다**
    - 자식 테이블에서 외래 키 컬럼을 `INSERT` 또는 `UPDATE`할 경우, 부모 테이블에 해당 키가 실제로 존재하는지 확인해야 한다.
    - 이때 부모 테이블에 **쓰기 잠금이 걸려 있다면**, 자식 테이블의 쓰기 작업은 **해제될 때까지 대기**하게 된다.

2. **외래 키와 무관한 컬럼 변경은 잠금 경합을 일으키지 않는다**
    - 자식 테이블의 외래 키 **이외 컬럼**을 변경할 때는, 외래 키 제약으로 인한 잠금 확장은 발생하지 않는다.

외래 키는 부모 테이블의 참조 무결성을 보장하기 위해 **읽기 잠금을 유발**할 수 있다.  
따라서 외래 키를 사용할 경우, **잠금 확장으로 인한 성능 저하**까지 고려해 테이블 모델링을 진행해야 한다.
